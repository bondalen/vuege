#!/bin/bash

# –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç pager

set -e

echo "üîÑ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞"
echo "==================================="

# –ü—Ä–æ–≤–µ—Ä—è–µ–º GitHub CLI
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ GitHub CLI..."
if ! gh auth status &> /dev/null; then
    echo "‚ùå GitHub CLI –Ω–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω"
    exit 1
fi

echo "‚úÖ GitHub CLI –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º Git —Å—Ç–∞—Ç—É—Å
echo ""
echo "üìä –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–µ–Ω–∏–π:"
git status --porcelain | cat

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
if [ -z "$(git status --porcelain)" ]; then
    echo ""
    echo "‚úÖ –ù–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞"
    echo "–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —É–∂–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω"
    exit 0
fi

echo ""
echo "üìù –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∫–æ–º–º–∏—Ç—É..."

# –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
echo "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤..."
git add .

# –°–æ–∑–¥–∞–µ–º –∫–æ–º–º–∏—Ç
COMMIT_MESSAGE="–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ - $(date '+%Y-%m-%d %H:%M:%S')

### üîÑ –ß—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:
- GitHub CLI –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- –°–∫—Ä–∏–ø—Ç—ã –∑–∞—â–∏—Ç—ã –æ—Ç pager
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP —Å–µ—Ä–≤–µ—Ä–æ–≤

### üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- GitHub CLI –≤–º–µ—Å—Ç–æ —Ç–æ–∫–µ–Ω–æ–≤
- –ó–∞—â–∏—Ç–∞ –æ—Ç pager
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

---
**–î–∞—Ç–∞**: $(date '+%Y-%m-%d %H:%M:%S')  
**–°—Ç–∞—Ç—É—Å**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è  
**–ú–µ—Ç–æ–¥**: GitHub CLI"

echo "–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞..."
git commit -m "$COMMIT_MESSAGE"

# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
echo ""
echo "üöÄ –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ GitHub..."
git push origin main

echo ""
echo "üéâ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"
echo "==================================="
echo "üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:"
echo "- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã"
echo "- ‚úÖ –ö–æ–º–º–∏—Ç —Å–æ–∑–¥–∞–Ω"
echo "- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ GitHub"
echo "- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç pager —Ä–∞–±–æ—Ç–∞–µ—Ç"
echo ""
echo "üîó –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/bondalen/vuege"
echo ""