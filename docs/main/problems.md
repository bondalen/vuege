# Долговременные проблемы проекта Vuege

**Псевдонимы**: файл проблем

Этот файл содержит учет проблем, которые не удалось решить в рамках одного чата и требуют долгосрочного решения.

## Порядок формирования записи в файле

### Система нумерации
Проблемы нумеруются по шаблону: **PYYMMDD-NN**
- **P** - префикс для обозначения проблемы (Problem)
- **YYMMDD** - дата выявления проблемы (год-месяц-день)
- **NN** - порядковый номер проблемы в течение дня (01, 02, 03...)

### Статусы проблем
- **Актуальна** - проблема требует решения
- **Решена** - проблема решена, но может повториться
- **Потеряла актуальность** - проблема больше не актуальна

### Приоритеты проблем
- **Критический** - блокирует работу проекта
- **Высокий** - существенно влияет на работу
- **Средний** - влияет на эффективность
- **Низкий** - не критично, но желательно решить

### Структура записи проблемы
```
## [PYYMMDD-NN] - Краткое описание проблемы

**Статус**: [Актуальна/Решена/Потеряла актуальность]
**Дата выявления**: YYYY-MM-DD
**Приоритет**: [Критический/Высокий/Средний/Низкий]

### Описание
Детальное описание проблемы и ее влияния на проект.

### Полезные ссылки
- Ссылки на альтернативные решения и ресурсы
- Ссылки на документацию и примеры
- Ссылки на связанные проекты и инструменты

### История решения
#### Чат N: [Название чата или "Чат не известен"]
##### Попытка N (YYYY-MM-DD)
**Действия**: Описание предпринятых действий
**Результат**: Полученные результаты
**Причина неудачи**: Анализ причин неудачи

### Инциденты
#### Инцидент N (YYYY-MM-DD)
```

---

## Актуальные проблемы

## [P250817-02] - Проблема блокировки терминала из-за "проблемы pager"

**Статус**: Актуальна
**Дата выявления**: 2025-08-17
**Приоритет**: Критический

### Описание
При выполнении команд git в терминале происходит блокировка из-за активации pager (less/more). Это критически блокирует работу с проектом.

### Полезные ссылки
- [Git Pager Configuration](https://git-scm.com/book/en/v2/Customizing-Git-Git-Configuration#_core_pager)
- [Desktop Commander MCP](https://github.com/desktop-commander/desktop-commander-mcp)
- [Robust Pager Protection Script](./robust-pager-protection.sh)

### История решения
#### Чат 1: "ЭТАП 10: ФИНАЛЬНОЕ ТЕСТИРОВАНИЕ И РАЗВЕРТЫВАНИЕ VUEGE"
##### Попытка 1 (2025-08-27)
**Действия**: Создан защитный скрипт robust-pager-protection.sh, настроены алиасы git
**Результат**: Проблема частично решена, но требует постоянного внимания
**Причина неудачи**: Проблема системного уровня, требует постоянной профилактики

### Инциденты
#### Инцидент 1 (2025-08-17)
Блокировка терминала при выполнении `git status` без флага `--porcelain`

---

## [P250825-01] - Проблема цикла чтения файлов в AI ассистенте

**Статус**: Актуальна
**Дата выявления**: 2025-08-25
**Приоритет**: Средний

### Описание
При работе с AI ассистентом происходит цикл чтения файлов, что приводит к неэффективности и потенциальным блокировкам.

### Полезные ссылки
- [Cursor IDE Documentation](https://cursor.sh/docs)
- [AI Assistant Best Practices](https://docs.cursor.sh/ai/chat)

### История решения
#### Чат 1: "ЭТАП 10: ФИНАЛЬНОЕ ТЕСТИРОВАНИЕ И РАЗВЕРТЫВАНИЕ VUEGE"
##### Попытка 1 (2025-08-27)
**Действия**: Использование desktop-commander-mcp для безопасной работы с файлами
**Результат**: Проблема частично решена
**Причина неудачи**: Проблема архитектурного уровня AI ассистента

---

## [P250827-01] - Проблема GraphQL мутаций в VUEGE

**Статус**: Актуальна
**Дата выявления**: 2025-08-27
**Приоритет**: Средний

### Описание
GraphQL мутации (CREATE, UPDATE, DELETE) возвращают INTERNAL_ERROR, что ограничивает функциональность системы. READ операции работают идеально.

### Полезные ссылки
- [Spring GraphQL Documentation](https://docs.spring.io/spring-graphql/docs/current/reference/html/)
- [GraphQL Mutations Best Practices](https://graphql.org/learn/queries/#mutations)
- [Spring Boot Validation](https://spring.io/guides/gs/validating-form-input/)

### История решения
#### Чат 1: "ЭТАП 10: ФИНАЛЬНОЕ ТЕСТИРОВАНИЕ И РАЗВЕРТЫВАНИЕ VUEGE"
##### Попытка 1 (2025-08-27)
**Действия**: CRUD тестирование выявило проблему с мутациями
**Результат**: Проблема идентифицирована, требуется доработка Backend
**Причина неудачи**: Недостаточная валидация и обработка ошибок в GraphQL контроллерах

### Инциденты
#### Инцидент 1 (2025-08-27)
Ошибка `INTERNAL ERROR for 44f6280c-1931-4c0c-113f-10c4e31034d4` при создании организационной единицы

---

## Решенные проблемы

## [P250817-01] - Проблема с Liquibase миграциями

**Статус**: Решена
**Дата выявления**: 2025-08-17
**Дата решения**: 2025-08-17
**Приоритет**: Критический

### Описание
Проблемы с выполнением Liquibase миграций при запуске Spring Boot приложения.

### История решения
#### Чат 1: "ЭТАП 2: Полное исправление Liquibase"
##### Попытка 1 (2025-08-17)
**Действия**: Исправлены SQL скрипты, добавлены недостающие поля, исправлена структура таблиц
**Результат**: Миграции выполняются успешно
**Статус**: Решена

---

## [P250825-02] - Проблема отображения опций в q-select компоненте

**Статус**: Решена
**Дата выявления**: 2025-08-25
**Дата решения**: 2025-08-27
**Приоритет**: Высокий

### Описание
В компоненте StatesPage.vue выпадающий список "Тип государства" (q-select) не отображал все доступные опции. При открытии выпадающего списка показывалась только одна опция (текущее выбранное значение) вместо всех 4 опций из массива stateTypes.

### Полезные ссылки
- [Quasar q-select Documentation](https://quasar.dev/vue-components/select)
- [Vue 3 Reactivity](https://vuejs.org/guide/extras/reactivity-in-depth.html)
- [Quasar Virtual Scrolling](https://quasar.dev/vue-components/select#virtual-scrolling)

### История решения
#### Чат 1: "ЭТАП 10: ФИНАЛЬНОЕ ТЕСТИРОВАНИЕ И РАЗВЕРТЫВАНИЕ VUEGE"
##### Попытка 1 (2025-08-27)
**Действия**: Добавлены параметры option-value="value", option-label="label", emit-value, map-options
**Результат**: Проблема не решена
**Причина неудачи**: Неправильная структура данных

##### Попытка 2 (2025-08-27)
**Действия**: Сделан массив stateTypes реактивным (ref())
**Результат**: Проблема не решена
**Причина неудачи**: Проблема не в реактивности

##### Попытка 3 (2025-08-27)
**Действия**: Использован computed для stateTypes, исправлены функции getStateTypeLabel и editState
**Результат**: Проблема решена
**Статус**: Решена

### Техническое решение
1. **Использован computed для stateTypes**:
   ```javascript
   const stateTypes = computed(() => [
     { label: 'Государство', value: 'STATE' },
     { label: 'Правительство', value: 'GOVERNMENT' },
     { label: 'Коммерческая', value: 'COMMERCIAL' },
     { label: 'Империя', value: 'EMPIRE' }
   ])
   ```

2. **Правильно настроены параметры q-select**:
   ```html
   <q-select
     v-model="form.type"
     :options="stateTypes"
     label="Тип государства"
     outlined
     dense
     class="q-mb-md"
     option-value="value"
     option-label="label"
     emit-value
     map-options
     clearable
   />
   ```

3. **Исправлены функции**:
   - `getStateTypeLabel` - использует `stateTypes.value`
   - `editState` - использует `stateTypes.value`

### Созданные тестовые страницы
- `/minimal-test` - минимальный тест q-select
- `/force-render-test` - тест принудительного рендеринга
- `/virtual-scroll-test` - тест отключения виртуального скроллинга
- `/string-test` - тест со строками
- `/qselect-test` - комплексный тест различных конфигураций

### Инциденты
#### Инцидент 1 (2025-08-27)
q-select отображал только одну опцию вместо всех четырех в выпадающем списке

---

## Проблемы, потерявшие актуальность

## [P250817-03] - Проблема с Node.js версией

**Статус**: Потеряла актуальность
**Дата выявления**: 2025-08-17
**Дата закрытия**: 2025-08-17
**Приоритет**: Средний

### Описание
Устаревшая версия Node.js в проекте.

### История решения
#### Чат 1: "ЭТАП 3: Обновление Node.js"
##### Попытка 1 (2025-08-17)
**Действия**: Обновлен Node.js до версии 20+
**Результат**: Проблема решена
**Статус**: Потеряла актуальность