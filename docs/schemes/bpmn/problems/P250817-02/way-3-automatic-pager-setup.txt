## Проблема P250817-02: Проблемы с pager в терминальных командах при автоматизации

### Способ 3: Автоматический скрипт настройки pager для новых чатов

**Цель**: Создание автоматического скрипта для настройки защиты от pager в начале каждого нового чата

**Результат**: Система автоматической настройки pager с комплексной диагностикой и тестированием

---

**Действие 3.1**: Создание автоматического скрипта setup-pager-protection.sh
- Создание файла src/infrastructure/scripts/setup-pager-protection.sh
- Добавление заголовка с описанием и зависимостями
- Установка прав на выполнение (chmod +x)

**Действие 3.2**: Реализация функции проверки текущих настроек pager
- Функция check_pager_settings() для диагностики
- Проверка git config --global core.pager
- Проверка переменных окружения PAGER, LESS, MORE, COMPOSER_NO_INTERACTION
- Подсчет количества проблемных настроек

**Действие 3.3**: Автоматическая настройка git pager и переменных окружения
- Функция setup_git_pager() для настройки git config --global core.pager cat
- Функция setup_environment_variables() для настройки переменных
- Установка PAGER=cat, LESS="-R -M --shift 5", MORE="-R", COMPOSER_NO_INTERACTION=1
- Автоматическое добавление настроек в ~/.bashrc

**Действие 3.4**: Создание функции safe_cmd в ~/.bashrc для автоматической защиты
- Функция create_bash_function() для добавления safe_cmd
- Автоматическое определение команд, требующих защиты от pager
- Добавление функции в ~/.bashrc с проверкой существования

**Действие 3.5**: Комплексное тестирование настроек (git log, pip list, man --help)
- Функция test_pager_protection() для тестирования
- Тест 1: git log --oneline -5 (проверка git pager)
- Тест 2: pip list (проверка pip pager)
- Тест 3: man --help (проверка man pager)
- Использование timeout для предотвращения блокировки

**Действие 3.6**: Обновление правил проекта для автоматического предложения настройки
- Обновление раздела "КРИТИЧЕСКОЕ НАПОМИНАНИЕ ДЛЯ НОВОГО ЧАТА" в .cursorrules
- Изменение приоритета автоматической настройки над ручной
- Добавление команды ./src/infrastructure/scripts/setup-pager-protection.sh

**Действие 3.7**: Интеграция с правилами установки MCP серверов
- Обновление раздела "Правила установки MCP серверов" в .cursorrules
- Изменение правила 2 для автоматического предложения настройки pager
- Интеграция с существующими правилами проверки проблем

**Действие 3.8**: Документирование решения в changelog.md и problems.md
- Добавление записи в changelog.md о создании автоматического скрипта
- Обновление проблемы P250817-02 с новым способом решения
- Добавление способа 3 в раздел "Способы, которыми проблема была решена"
- Создание ссылки на BPMN диаграмму

**Результат**: Создана система автоматической настройки pager для новых чатов с комплексной диагностикой и тестированием
- Автоматический скрипт setup-pager-protection.sh готов к использованию
- Правила проекта обновлены для автоматического предложения настройки
- Система включает диагностику, настройку, тестирование и интеграцию
- Проблема P250817-02 полностью решена с тремя способами решения
