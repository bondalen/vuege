# Правила использования BPMN артефактов

## Назначение документа
Данный документ содержит правила использования BPMN артефактов в проекте Vuege, основанные на документации [BPMN Sketch Miner](https://www.bpmn-sketch-miner.ai/doc/01-tasks.html#task-sequences).

## Базовые артефакты (текущий набор)

### 1. Задачи (Tasks)
Задачи являются основными строительными блоками процессов. Они описывают **что** происходит во время процесса.

#### Правила создания задач:
- Для моделирования задачи просто напишите её название на одной строке
- По умолчанию тип задачи неопределен (undefined) и никакой символ не отображается в диаграмме

**Пример:**
```
Place Order
```

### 2. Последовательности задач (Task Sequences)
Если записать несколько задач, каждую на отдельной строке, вы описываете последовательность, где одна задача происходит после предыдущей.

#### Правила создания последовательностей:
- Каждая задача на отдельной строке
- Задачи выполняются последовательно одна за другой
- Если разные задачи не логически зависимы друг от друга, запишите их как отдельные списки
- Разделяйте каждую последовательность **пустой строкой**

**Пример:**
```
Place order
Check payment
Package goods
Ship goods

Check Inventory
Update Product Catalog
```

### 3. Типы задач (Task Types)
Для различения различных типов задач напишите **идентификатор типа** в начале каждой строки, представляющей задачу.

#### Доступные типы задач:
- `user` - Пользовательская задача (User Task)
- `service` - Сервисная задача (Service Task)
- `rule` - Задача бизнес-правила (Business Rule Task)
- `manual` - Ручная задача (Manual Task)
- `receive` - Получение сообщения (Message)
- `script` - Скриптовая задача (Script Task)
- `send` - Отправка ответного сообщения (Reply Message)

**Пример:**
```
user User Task
service Service Task
rule Business Rule Task
manual Manual Task
receive Message
script Script Task
send Reply Message
```

### 4. События (Events)
BPMN Sketch Miner автоматически включает необходимые начальные и конечные события при создании модели процесса.

#### Автоматически создаваемые события:
- **Start Event** - создается автоматически в начале процесса
- **End Event** - создается автоматически в конце процесса

## Порядок формирования записи в файле

### Система нумерации
- Используйте простую последовательную нумерацию: 1, 2, 3, ...
- Для подзадач используйте формат: 1.1, 1.2, 1.3, ...

### Структура записи
1. **Заголовок** - название процесса
2. **Описание** - краткое описание назначения процесса
3. **Последовательность задач** - список задач в порядке выполнения
4. **Результат** - ожидаемый результат выполнения процесса

## Стандарт отображения способов решения проблем

### Формат файлов
- Используйте текстовые файлы с расширением `.txt` в формате BPMN Sketch Miner
- НЕ создавайте файлы `.bpmn` для способов решения проблем

### Структура способа решения
```
Действие 1.1: [Название первого действия]
Действие 1.2: [Название второго действия]
Действие 1.3: [Название третьего действия]
...
Действие 1.N: [Название N-го действия]
Результат: [Описание достигнутого результата]
```

### Правила именования
- Каждое действие начинается с префикса "Действие [номер способа].[номер действия]." (точка вместо двоеточия)
- Нумерация действий: использовать систему нумерации UML-диаграмм активности
  - Основная последовательность: 1.1, 1.2, 1.3, ...
  - Ветвления: 2.1.1, 2.1.2 (первая ветвь), 2.2.1, 2.2.2 (вторая ветвь)
  - Слияния: продолжение основной нумерации после слияния ветвей
- Последняя строка всегда "Результат. [описание]" (точка вместо двоеточия)
- Результат является отдельной задачей перед финишем процесса
- **ВАЖНО**: Используйте точку (.) вместо двоеточия (:) для избежания создания разделительных дорожек

### Пример структуры
```
Действие 1.1. Создание глобальных настроек git для отключения pager
Действие 1.2. Настройка переменных окружения (PAGER, LESS, MORE)
Действие 1.3. Создание wrapper-скрипта safe-command-wrapper.sh для автоматической защиты
Действие 1.4. Создание чек-листа команд с защитой от pager
Действие 1.5. Обновление правил работы с терминалом в проекте
Действие 1.6. Добавление функции bash для безопасного выполнения команд
Результат. Создана комплексная система защиты от pager для автоматизации
```

**Примечание**: В данном примере "1" - это номер способа решения проблемы, а "1,2,3,4,5,6" - порядковые номера действий в рамках этого способа.

### Принципы ведения
- Используйте только базовые артефакты из данного документа
- Соблюдайте простоту и читаемость диаграмм
- Избегайте сложных ветвлений и параллельных процессов
- Фокусируйтесь на последовательном выполнении задач

## Ограничения текущего набора
На данный момент используются только следующие артефакты:
- Задачи (Tasks)
- Последовательности задач (Task Sequences)
- Типы задач (Task Types)
- Автоматические события (Start/End Events)

## Пуллы и дорожки (Pools and Swimlanes)

### Назначение
Pools визуально описывают независимые сущности, участвующие в сотрудничестве. Они показывают **кто** участвует в процессах и кто отвечает за выполнение каждой задачи.

### Создание разделительных дорожек
- **Двоеточие (:)**: Используется для создания разделительных дорожек
- **Формат**: `[Название дорожки]: [Название задачи]`
- **Пример**: `Customer: Place order`

### Правила размещения задач
- По умолчанию все задачи размещаются в одном пуле с одной дорожкой `?`
- Достаточно указать дорожку только при первом упоминании задачи
- Задачи остаются в той же дорожке, где были изначально определены
- Передачи управления между задачами остаются в том же пуле

### Установка пула по умолчанию
```
Customer:

Place order
Pay
Receive goods

Shop:

Process order
Check payment
Deliver goods
```

### Переопределение пула по умолчанию
```
Shop:

Process order
Bank: Check payment
Deliver goods
```

### Важные замечания
- Объявление пула по умолчанию НЕ прерывает последовательность задач
- Для прерывания последовательности нужна **пустая строка**
- Двоеточие (:) создает разделительные дорожки, точка (.) - нет

## Планы расширения
В будущем планируется добавить:
- Шлюзы (Gateways) для ветвления
- Параллельные процессы
- Промежуточные события
- Другие артефакты по мере необходимости

## Источники
- [BPMN Sketch Miner - Tasks](https://www.bpmn-sketch-miner.ai/doc/01-tasks.html#task-sequences)
- [BPMN Sketch Miner - Task Types](https://www.bpmn-sketch-miner.ai/doc/01-tasks.html#task-types)
- [BPMN Sketch Miner - Pools and Swimlanes](https://www.bpmn-sketch-miner.ai/doc/02-pools.html#pool-task-annotation)
